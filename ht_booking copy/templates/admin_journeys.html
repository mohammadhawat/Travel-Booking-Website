{% extends "base.html" %}

{% block content %}
<h2>✈️ Manage Journeys</h2>

<h3>Add New Journey</h3>
<form method="POST">
    <input type="hidden" name="form_type" value="add">
    <input type="text" name="origin" placeholder="Origin" required><br>
    <input type="text" name="destination" placeholder="Destination" required><br>
    <input type="time" name="departure_time" required><br>
    <input type="time" name="arrival_time" required><br>
    <input type="number" name="fare" step="0.01" placeholder="Fare" required><br>
    <input type="number" name="seat_capacity" placeholder="Seats" required><br>
    <select name="travel_class" required>
        <option value="Economy">Economy</option>
        <option value="Business">Business</option>
    </select><br>
    <select name="travel_day" required>
        <option value="Mon">Mon</option>
        <option value="Tue">Tue</option>
        <option value="Wed">Wed</option>
        <option value="Thu">Thu</option>
        <option value="Fri">Fri</option>
    </select><br>
    <button type="submit">➕ Add Journey</button>
</form>

<hr>

<h3>Existing Journeys</h3>
<table>
    <tr>
        <th>ID</th><th>Origin</th><th>Destination</th><th>Time</th><th>Fare</th><th>Class</th><th>Day</th><th>Seats</th><th>Booked</th><th>Actions</th>
    </tr>
    {% for j in journeys %}
    <tr>
        <form method="POST">
            <input type="hidden" name="form_type" value="update">
            <input type="hidden" name="journey_id" value="{{ j[0] }}">
            <td>{{ j[0] }}</td>
            <td><input type="text" name="origin" value="{{ j[1] }}"></td>
            <td><input type="text" name="destination" value="{{ j[2] }}"></td>
            <td>
                <input type="time" name="departure_time" value="{{ j[3] }}">
                <input type="time" name="arrival_time" value="{{ j[4] }}">
            </td>
            <td><input type="number" step="0.01" name="fare" value="{{ j[5] }}"></td>
            <td>
                <select name="travel_class">
                    <option {% if j[6] == 'Economy' %}selected{% endif %}>Economy</option>
                    <option {% if j[6] == 'Business' %}selected{% endif %}>Business</option>
                </select>
            </td>
            <td>
                <select name="travel_day">
                    {% for day in ['Mon', 'Tue', 'Wed', 'Thu', 'Fri'] %}
                    <option {% if j[7] == day %}selected{% endif %}>{{ day }}</option>
                    {% endfor %}
                </select>
            </td>
            <td><input type="number" name="seat_capacity" value="{{ j[8] }}"></td>
            <td>{{ j[9] }}</td>
            <td>
                <button type="submit">💾 Save</button>
        </form>
        <form method="POST" style="display:inline;">
            <input type="hidden" name="form_type" value="delete">
            <input type="hidden" name="journey_id" value="{{ j[0] }}">
            <button type="submit" style="background:red;color:white;">🗑️</button>
        </form>
        </td>
    </tr>
    {% endfor %}
</table>
{% endblock %}